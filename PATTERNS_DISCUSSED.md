# Паттерны, обсуждаемые в ходе разработки

Этот файл содержит паттерны и правила, которые были обсуждены и согласованы в ходе нашего взаимодействия.

## 1. Языковая локализация документации

### Правило

Все основные файлы документации должны быть доступны на русском языке.

### Реализация

- Основные файлы правил QODER_RULES.md и QODER_RULES_BY_CODE.md переведены на русский язык
- Ориглийские версии доступны в файлах без суффикса \_RU
- Создан файл README_RU.md с описанием структуры документации на русском языке
- Обновлен основной README.md с информацией о русскоязычной документации

## 2. Структура файлов правил QODER

### Правило

Файлы правил QODER должны быть структурированы по категориям разработки.

### Реализация

- QODER_RULES.md содержит общие правила по категориям (бэкенд, фронтенд, БД, тестирование и т.д.)
- QODER_RULES_BY_CODE.md содержит подробные шаблоны, извлеченные из кода проекта
- Каждый файл имеет оглавление для навигации
- Правила сгруппированы по тематическим разделам

## 3. Соглашения об именовании файлов

### Правило

Файлы с переводами должны иметь те же имена, что и оригинальные, с добавлением суффикса языка.

### Реализация

- Английские версии: QODER_RULES.md, QODER_RULES_BY_CODE.md
- Русские версии: QODER_RULES_RU.md, QODER_RULES_BY_CODE_RU.md
- Английские оригиналы доступны в файлах без суффикса \_RU

## 4. Поддержка мультиязычности

### Правило

Проект должен поддерживать мультиязычность в документации.

### Реализация

- Созданы русскоязычные версии основных файлов документации
- Оригинальные английские версии доступны для справки
- Добавлена информация о мультиязычности в основной README.md

## 5. Обновление документации

### Правило

Любые изменения в архитектуре или паттернах проекта должны отражаться в документации.

### Реализация

- Этот файл PATTERNS_DISCUSSED.md создан для фиксации обсуждаемых паттернов
- Все изменения в правилах и паттернах будут документироваться
- При внесении изменений в архитектуру проекта обновляется соответствующая документация

## 6. Структура документации проекта

### Правило

Документация проекта должна быть структурирована и легко навигируема.

### Реализация

- Основные файлы правил находятся в корне проекта
- Каждый файл имеет оглавление
- Ссылки между файлами документации работают корректно
- Добавлены описания содержания каждого файла документации

## 7. Версионирование документации

### Правило

Документация должна поддерживать версионирование и сохранять историю изменений.

### Реализация

- Русские версии файлов сохранены с суффиксом `_RU`
- Английские версии доступны в файлах без суффикса
- Новая версия файлов создается при значительных изменениях
- История изменений может отслеживаться через систему контроля версий

## 8. Доступность документации

### Правило

Документация должна быть легко доступна и понятна для всех участников проекта.

### Реализация

- Русскоязычная документация размещена в основном каталоге проекта
- Добавлены ссылки на документацию в README.md
- Создан файл README_RU.md с описанием структуры документации
- Все файлы документации имеют понятные названия и структуру

## 9. Работа с переводами

### Правило

Переводы в проекте собираются автоматически из кода с помощью маркеров, без ручного вмешательства в файлы переводов.

### Реализация

- Ключи для переводов собираются из кода в файлы POT (пример: libs/feature/metrics-afat/src/i18n/template.pot)
- Файлы POT могут находиться как в приложениях (примеры: apps/client/src/assets/i18n/template.pot, apps/server/src/assets/i18n/getText/template.pot), так и в библиотеках (примеры: libs/feature/sso/src/i18n/getText/template.pot, libs/feature/sso-afat/src/i18n/template.pot)
- Когда разработчик вручную запускает npm run translates, то:
  1. Формируются переводы на нескольких языках в данном проекте это ru (пример: libs/feature/metrics-afat/src/i18n/ru.po) и en (пример: libs/feature/metrics-afat/src/i18n/en.po)
  2. Формируются json вариант для переводов разных языков ru (пример: libs/feature/metrics-afat/src/i18n/ru.json) и en (пример: libs/feature/metrics-afat/src/i18n/en.json)
  3. Все переводы из либ и нод модулей собираются в приложениях (пример: apps/server/src/assets/i18n/ru.vendor.json, apps/client/src/assets/i18n/en.vendor.json)
- В итоге после шагов выше у нас создаются файлы с переводами где есть только ключи но нет значения переводов, если ранее значение было заполнено то оно останется заполненным
- Сам перевод производится вручную разработчиком путем правки PO файлов или с помощью программы Poedit
- После этого производится ручной запуск npm run translates чтобы сформировать json файлы и обновить файлы переводов в приложениях
- Не требуется ручное редактирование JSON файлов переводов
- Все переводы извлекаются автоматически из кода с помощью маркеров

Английская версия этого файла доступна по ссылке: [PATTERNS_DISCUSSED_EN.md](./PATTERNS_DISCUSSED_EN.md)
